{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Acceptance Test Report Schema",
  "type": "object",
  "required": [
    "timestamp",
    "environment",
    "overall_completion",
    "categories"
  ],
  "properties": {
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of report generation"
    },
    "environment": {
      "type": "string",
      "enum": ["local", "staging", "production"],
      "description": "Testing environment"
    },
    "overall_completion": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "Overall completion percentage as decimal (0.0 to 1.0)"
    },
    "overall_percentage": {
      "type": "number",
      "minimum": 0,
      "maximum": 100,
      "description": "Overall completion percentage"
    },
    "overall_status": {
      "type": "string",
      "enum": ["pass", "fail", "warning"],
      "description": "Overall test status"
    },
    "total_tests": {
      "type": "integer",
      "minimum": 0,
      "description": "Total number of test cases"
    },
    "passed_tests": {
      "type": "integer",
      "minimum": 0,
      "description": "Number of passed tests"
    },
    "failed_tests": {
      "type": "integer",
      "minimum": 0,
      "description": "Number of failed tests"
    },
    "skipped_tests": {
      "type": "integer",
      "minimum": 0,
      "description": "Number of skipped tests"
    },
    "categories": {
      "type": "object",
      "properties": {
        "client_interface": {
          "$ref": "#/definitions/categoryResult"
        },
        "admin_interface": {
          "$ref": "#/definitions/categoryResult"
        },
        "api_functionality": {
          "$ref": "#/definitions/categoryResult"
        },
        "data_integrity": {
          "$ref": "#/definitions/categoryResult"
        }
      },
      "required": [
        "client_interface",
        "admin_interface",
        "api_functionality",
        "data_integrity"
      ]
    },
    "issues": {
      "type": "object",
      "properties": {
        "critical": {
          "type": "integer",
          "minimum": 0
        },
        "high": {
          "type": "integer",
          "minimum": 0
        },
        "medium": {
          "type": "integer",
          "minimum": 0
        },
        "low": {
          "type": "integer",
          "minimum": 0
        }
      },
      "required": ["critical", "high", "medium", "low"]
    },
    "test_results": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/testResult"
      }
    },
    "recommendations": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "priority": {
            "type": "string",
            "enum": ["critical", "high", "medium", "low"]
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "action_items": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": ["priority", "title", "description"]
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "tester_name": {
          "type": "string"
        },
        "system_version": {
          "type": "string"
        },
        "test_duration": {
          "type": "number",
          "description": "Test duration in seconds"
        }
      }
    }
  },
  "definitions": {
    "categoryResult": {
      "type": "object",
      "required": ["score", "percentage", "weighted", "weight"],
      "properties": {
        "score": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "percentage": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "weighted": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "weight": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "total": {
          "type": "integer",
          "minimum": 0
        },
        "passed": {
          "type": "integer",
          "minimum": 0
        },
        "failed": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "testResult": {
      "type": "object",
      "required": ["id", "status", "category"],
      "properties": {
        "id": {
          "type": "string"
        },
        "status": {
          "type": "string",
          "enum": ["passed", "failed", "skipped"]
        },
        "category": {
          "type": "string"
        },
        "module": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "severity": {
          "type": "string",
          "enum": ["critical", "high", "medium", "low"]
        },
        "error_message": {
          "type": "string"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        },
        "response_time": {
          "type": "number",
          "description": "Response time in milliseconds"
        }
      }
    }
  }
}

